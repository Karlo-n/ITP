<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cannabis - Galería de Imágenes | InfoSustancias</title>
    <link rel="stylesheet" href="../cannabis/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <style>
        /* Estilos específicos para este archivo */
        .substance-buttons {
            background-color: #5c6bc0;
            padding: 10px 0;
            text-align: center;
        }
        
        .buttons-container {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .substance-button {
            padding: 8px 15px;
            border-radius: 50px;
            background-color: rgba(255, 255, 255, 0.15);
            color: white;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            text-decoration: none;
        }
        
        .substance-button:hover {
            background-color: white;
            transform: translateY(-3px);
        }
        
        .cannabis-btn:hover {
            color: #558b2f;
        }
        
        .fentanyl-btn:hover {
            color: #c62828;
        }
        
        .alcohol-btn:hover {
            color: #0277bd;
        }
        
        .inhalants-btn:hover {
            color: #6a1b9a;
        }
        
        .methamphetamine-btn:hover {
            color: #d84315;
        }
        
        .vaping-btn:hover {
            color: #546e7a;
        }
        
        .benzos-btn:hover {
            color: #00695c;
        }
        
        /* Controles de navegación (flechas) */
        .gallery-controls {
            position: relative;
            width: 100%;
            height: 100%;
        }
        
        .nav-btn {
            position: absolute;
            width: 35px;
            height: 35px;
            background-color: rgba(255, 255, 255, 0.7);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            top: 50%;
            transform: translateY(-50%);
        }
        
        .nav-btn:hover {
            background-color: #558b2f;
            color: white;
        }
        
        .nav-btn.right {
            right: 20px;
        }
        
        .nav-btn.left {
            left: 20px;
        }
        
        .nav-btn svg {
            width: 18px;
            height: 18px;
        }
        
        /* Ocultar botones cuando no hay imágenes */
        .no-images .nav-btn {
            display: none;
        }
        
        /* Sección de comentarios */
        .comments-section {
            margin-top: 40px;
            background-color: #ffffff;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
        }
        
        .comments-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 1px solid #e0e0e0;
            padding-bottom: 15px;
        }
        
        .comments-title {
            font-size: 1.5rem;
            color: #2c3e50;
            margin: 0;
        }
        
        .comments-stats {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .comments-count {
            font-size: 0.9rem;
            color: #546e7a;
        }
        
        .average-rating {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .star {
            color: #ffc107;
        }
        
        .rating-value {
            font-weight: 600;
            color: #2c3e50;
        }
        
        .comment-form {
            background-color: #f5f7fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        .form-control {
            width: 100%;
            padding: 10px;
            border: 1px solid #e0e0e0;
            border-radius: 5px;
            font-family: 'Open Sans', sans-serif;
            transition: border-color 0.3s ease;
        }
        
        .form-control:focus {
            outline: none;
            border-color: #558b2f;
        }
        
        .rating-selector {
            display: flex;
            gap: 5px;
        }
        
        .rating-selector label {
            cursor: pointer;
            font-size: 1.5rem;
            color: #e0e0e0;
        }
        
        .rating-selector input {
            display: none;
        }
        
        .rating-selector label:hover,
        .rating-selector label:hover ~ label,
        .rating-selector input:checked ~ label {
            color: #ffc107;
        }
        
        .submit-btn {
            background-color: #558b2f;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.3s ease;
        }
        
        .submit-btn:hover {
            background-color: #33691e;
        }
        
        .top-comments {
            margin-bottom: 30px;
        }
        
        .comment {
            padding: 15px;
            border-bottom: 1px solid #e0e0e0;
            margin-bottom: 15px;
        }
        
        .comment:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }
        
        .comment-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .comment-author {
            font-weight: 600;
            color: #2c3e50;
        }
        
        .comment-date {
            font-size: 0.8rem;
            color: #546e7a;
        }
        
        .comment-rating {
            display: flex;
            gap: 2px;
            font-size: 0.9rem;
            color: #ffc107;
            margin-bottom: 8px;
        }
        
        .comment-content {
            line-height: 1.6;
            color: #2c3e50;
        }
        
        .show-more-btn {
            display: block;
            width: 100%;
            padding: 10px;
            background-color: #f5f7fa;
            border: 1px solid #e0e0e0;
            border-radius: 5px;
            text-align: center;
            color: #2c3e50;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .show-more-btn:hover {
            background-color: #e0e0e0;
        }
        
        .all-comments {
            display: none;
            margin-top: 30px;
        }
        
        .all-comments.show {
            display: block;
        }
    </style>
</head>
<body>
    <header class="site-header">
        <div class="container">
            <div class="logo">
                <h1>InfoSustancias</h1>
                <p class="tagline">Información y Educación sobre Sustancias</p>
            </div>
            <nav class="main-nav">
                <ul>
                    <li><a href="/">Inicio</a></li>
                    <li><a href="/articulos">Artículos</a></li>
                    <li><a href="/recursos">Recursos</a></li>
                    <li><a href="/ayuda">Ayuda</a></li>
                    <li><a href="/acerca">Acerca de</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Barra de navegación de sustancias -->
    <section class="substance-buttons">
        <div class="container">
            <div class="buttons-container">
                <a href="/cannabis" class="substance-button cannabis-btn">Cannabis</a>
                <a href="/fentanillo" class="substance-button fentanyl-btn">Fentanilo</a>
                <a href="/alcohol" class="substance-button alcohol-btn">Alcohol</a>
                <a href="/inhalables" class="substance-button inhalants-btn">Inhalables</a>
                <a href="/metanfetamina" class="substance-button methamphetamine-btn">Metanfetamina</a>
                <a href="/vapeadores" class="substance-button vaping-btn">Vapeadores/Tabaco</a>
                <a href="/benzodiazepinas" class="substance-button benzos-btn">Benzodiazepinas</a>
            </div>
        </div>
    </section>

    <main>
        <div class="container">
            <div class="gallery-container">
                <h1 class="gallery-title">Galería de Imágenes: Cannabis</h1>
                
                <div class="image-container" id="imageContainer">
                    <!-- Controles de navegación (solo flechas) -->
                    <div class="gallery-controls">
                        <div class="nav-btn left" onclick="changeImage(-1)">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </div>
                        <div class="nav-btn right" onclick="changeImage(1)">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </div>
                    </div>
                    
                    <!-- Imágenes de la galería con rutas corregidas -->
                    <img src="./img/cannabis-1.jpg" alt="Cannabis Imagen 1" class="gallery-image active" data-index="0">
                    <img src="./img/cannabis-2.jpg" alt="Cannabis Imagen 2" class="gallery-image" data-index="1" onerror="this.src='/api/placeholder/900/500'">
                    <img src="./img/cannabis-3.jpg" alt="Cannabis Imagen 3" class="gallery-image" data-index="2" onerror="this.src='/api/placeholder/900/500'">
                    <img src="./img/cannabis-4.jpg" alt="Cannabis Imagen 4" class="gallery-image" data-index="3" onerror="this.src='/api/placeholder/900/500'">
                    
                    <!-- Descripción de la imagen -->
                    <div class="gallery-caption">
                        La planta de cannabis contiene más de 100 compuestos únicos llamados cannabinoides, siendo el THC y el CBD los más estudiados.
                    </div>
                </div>
                
                <!-- Puntos de navegación -->
                <div class="gallery-nav">
                    <div class="nav-dot active" onclick="showImage(0)"></div>
                    <div class="nav-dot" onclick="showImage(1)"></div>
                    <div class="nav-dot" onclick="showImage(2)"></div>
                    <div class="nav-dot" onclick="showImage(3)"></div>
                </div>
                
                <div class="gallery-info">
                    <p>Esta galería muestra diferentes aspectos relacionados con el cannabis, desde la planta en sus distintas etapas hasta representaciones de sus efectos y usos medicinales y recreativos.</p>
                    <p>El contenido tiene fines exclusivamente educativos e informativos, como parte de nuestro compromiso con la educación basada en evidencia científica.</p>
                </div>
                
                <!-- Sección de comentarios -->
                <div class="comments-section">
                    <div class="comments-header">
                        <h2 class="comments-title">Comentarios</h2>
                        <div class="comments-stats">
                            <span class="comments-count" id="totalComments">12 comentarios</span>
                            <div class="average-rating">
                                <span class="star">★</span>
                                <span class="star">★</span>
                                <span class="star">★</span>
                                <span class="star">★</span>
                                <span class="star" style="color: #e0e0e0;">★</span>
                                <span class="rating-value">4.2</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Formulario para añadir comentarios -->
                    <div class="comment-form">
                        <h3>Deja tu comentario</h3>
                        <form id="commentForm">
                            <div class="form-group">
                                <label for="commentName">Nombre</label>
                                <input type="text" id="commentName" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label for="commentEmail">Email (no será publicado)</label>
                                <input type="email" id="commentEmail" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label>Calificación</label>
                                <div class="rating-selector">
                                    <input type="radio" id="star5" name="rating" value="5">
                                    <label for="star5">★</label>
                                    <input type="radio" id="star4" name="rating" value="4">
                                    <label for="star4">★</label>
                                    <input type="radio" id="star3" name="rating" value="3">
                                    <label for="star3">★</label>
                                    <input type="radio" id="star2" name="rating" value="2">
                                    <label for="star2">★</label>
                                    <input type="radio" id="star1" name="rating" value="1">
                                    <label for="star1">★</label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="commentText">Comentario</label>
                                <textarea id="commentText" class="form-control" rows="4" required></textarea>
                            </div>
                            <button type="submit" class="submit-btn">Publicar comentario</button>
                        </form>
                    </div>
                    
                    <!-- Top 5 comentarios -->
                    <div class="top-comments">
                        <h3>Mejores comentarios</h3>
                        <div id="topCommentsList">
                            <!-- Comentario 1 -->
                            <div class="comment">
                                <div class="comment-header">
                                    <span class="comment-author">María García</span>
                                    <span class="comment-date">15 marzo, 2025</span>
                                </div>
                                <div class="comment-rating">
                                    <span>★</span><span>★</span><span>★</span><span>★</span><span>★</span>
                                </div>
                                <p class="comment-content">Excelente información educativa. La galería de imágenes permite entender mejor las diferencias entre distintas variedades de cannabis. Me parece importante tener este tipo de recursos para la educación.</p>
                            </div>
                            
                            <!-- Comentario 2 -->
                            <div class="comment">
                                <div class="comment-header">
                                    <span class="comment-author">Carlos Rodríguez</span>
                                    <span class="comment-date">12 marzo, 2025</span>
                                </div>
                                <div class="comment-rating">
                                    <span>★</span><span>★</span><span>★</span><span>★</span><span style="color: #e0e0e0;">★</span>
                                </div>
                                <p class="comment-content">Como estudiante de medicina, agradezco este enfoque objetivo y científico sobre las sustancias psicoactivas. La información presentada es precisa y actualizada.</p>
                            </div>
                            
                            <!-- Comentario 3 -->
                            <div class="comment">
                                <div class="comment-header">
                                    <span class="comment-author">Laura Martínez</span>
                                    <span class="comment-date">10 marzo, 2025</span>
                                </div>
                                <div class="comment-rating">
                                    <span>★</span><span>★</span><span>★</span><span>★</span><span>★</span>
                                </div>
                                <p class="comment-content">Me encanta que el sitio aborde estos temas desde una perspectiva de reducción de daños y educación basada en evidencia. Las imágenes están muy bien seleccionadas para mostrar los aspectos más importantes.</p>
                            </div>
                            
                            <!-- Comentario 4 -->
                            <div class="comment">
                                <div class="comment-header">
                                    <span class="comment-author">Daniel López</span>
                                    <span class="comment-date">8 marzo, 2025</span>
                                </div>
                                <div class="comment-rating">
                                    <span>★</span><span>★</span><span>★</span><span style="color: #e0e0e0;">★</span><span style="color: #e0e0e0;">★</span>
                                </div>
                                <p class="comment-content">Información interesante, aunque me gustaría ver más detalles sobre los aspectos médicos y terapéuticos del cannabis. Buena iniciativa de todas formas.</p>
                            </div>
                            
                            <!-- Comentario 5 -->
                            <div class="comment">
                                <div class="comment-header">
                                    <span class="comment-author">Ana Sánchez</span>
                                    <span class="comment-date">5 marzo, 2025</span>
                                </div>
                                <div class="comment-rating">
                                    <span>★</span><span>★</span><span>★</span><span>★</span><span style="color: #e0e0e0;">★</span>
                                </div>
                                <p class="comment-content">Como educadora, valoro mucho los recursos visuales para explicar temas complejos. Esta galería es un excelente material didáctico para hablar sobre sustancias con adolescentes de manera objetiva.</p>
                            </div>
                        </div>
                        
                        <!-- Botón para mostrar todos los comentarios -->
                        <button class="show-more-btn" id="showMoreBtn">Ver todos los comentarios</button>
                    </div>
                    
                    <!-- Todos los comentarios (inicialmente ocultos) -->
                    <div class="all-comments" id="allComments">
                        <h3>Todos los comentarios</h3>
                        <div id="allCommentsList">
                            <!-- Aquí se cargarán todos los comentarios -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="site-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>InfoSustancias</h3>
                    <p>Un proyecto educativo desarrollado por estudiantes con fines exclusivamente informativos y académicos.</p>
                </div>
                <div class="footer-column">
                    <h4>Enlaces rápidos</h4>
                    <ul>
                        <li><a href="/">Inicio</a></li>
                        <li><a href="/articulos">Artículos</a></li>
                        <li><a href="/recursos">Recursos</a></li>
                        <li><a href="/ayuda">Ayuda</a></li>
                        <li><a href="/acerca">Acerca de</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h4>Aviso legal</h4>
                    <p>Este sitio proporciona información educativa desarrollada por estudiantes con fines académicos y no sustituye el consejo médico profesional. La información presentada tiene únicamente propósitos informativos.</p>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2025 InfoSustancias. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <script>
        // JavaScript para el funcionamiento de la galería
        let currentImageIndex = 0;
        const images = document.querySelectorAll('.gallery-image');
        const dots = document.querySelectorAll('.nav-dot');
        const captions = [
            "La planta de cannabis contiene más de 100 compuestos únicos llamados cannabinoides, siendo el THC y el CBD los más estudiados.",
            "El THC (tetrahidrocannabinol) es el principal componente psicoactivo del cannabis que interactúa con el sistema endocannabinoide del cerebro.",
            "El CBD (cannabidiol) es un componente no psicoactivo del cannabis que ha mostrado potencial terapéutico para varias condiciones médicas.",
            "Los efectos del cannabis varían significativamente dependiendo de la composición química, dosis, método de consumo y factores individuales."
        ];
        const captionElement = document.querySelector('.gallery-caption');
        const imageContainer = document.getElementById('imageContainer');

        // Verificar si hay imágenes disponibles
        function checkImages() {
            if (images.length === 0) {
                imageContainer.classList.add('no-images');
                return false;
            }
            return true;
        }

        // Función para mostrar una imagen específica
        function showImage(index) {
            if (!checkImages()) return;
            
            if (index < 0) index = images.length - 1;
            if (index >= images.length) index = 0;
            
            // Actualizar imágenes
            images.forEach(img => img.classList.remove('active'));
            images[index].classList.add('active');
            
            // Actualizar puntos de navegación
            dots.forEach(dot => dot.classList.remove('active'));
            dots[index].classList.add('active');
            
            // Actualizar leyenda
            captionElement.textContent = captions[index];
            
            currentImageIndex = index;
        }

        // Función para cambiar a la siguiente o anterior imagen
        function changeImage(direction) {
            if (!checkImages()) return;
            showImage(currentImageIndex + direction);
        }

        // Configurar intervalo para cambio automático de imágenes
        let slideInterval = setInterval(() => {
            if (checkImages()) {
                changeImage(1);
            }
        }, 5000);

        // Detener el cambio automático cuando el usuario interactúa con la galería
        imageContainer.addEventListener('mouseenter', () => {
            clearInterval(slideInterval);
        });

        // Reanudar el cambio automático cuando el usuario deja de interactuar
        imageContainer.addEventListener('mouseleave', () => {
            slideInterval = setInterval(() => {
                if (checkImages()) {
                    changeImage(1);
                }
            }, 5000);
        });

        // Sistema de comentarios
        const commentForm = document.getElementById('commentForm');
        const showMoreBtn = document.getElementById('showMoreBtn');
        const allComments = document.getElementById('allComments');
        const allCommentsList = document.getElementById('allCommentsList');
        const topCommentsList = document.getElementById('topCommentsList');
        const totalCommentsElement = document.getElementById('totalComments');
        
        // Base de datos simulada de comentarios (podría ser reemplazada por una base de datos real)
        let commentsDB = [
            {
                id: 1,
                author: "María García",
                date: "15 marzo, 2025",
                rating: 5,
                content: "Excelente información educativa. La galería de imágenes permite entender mejor las diferencias entre distintas variedades de cannabis. Me parece importante tener este tipo de recursos para la educación."
            },
            {
                id: 2,
                author: "Carlos Rodríguez",
                date: "12 marzo, 2025",
                rating: 4,
                content: "Como estudiante de medicina, agradezco este enfoque objetivo y científico sobre las sustancias psicoactivas. La información presentada es precisa y actualizada."
            },
            {
                id: 3,
                author: "Laura Martínez",
                date: "10 marzo, 2025",
                rating: 5,
                content: "Me encanta que el sitio aborde estos temas desde una perspectiva de reducción de daños y educación basada en evidencia. Las imágenes están muy bien seleccionadas para mostrar los aspectos más importantes."
            },
            {
                id: 4,
                author: "Daniel López",
                date: "8 marzo, 2025",
                rating: 3,
                content: "Información interesante, aunque me gustaría ver más detalles sobre los aspectos médicos y terapéuticos del cannabis. Buena iniciativa de todas formas."
            },
            {
                id: 5,
                author: "Ana Sánchez",
                date: "5 marzo, 2025",
                rating: 4,
                content: "Como educadora, valoro mucho los recursos visuales para explicar temas complejos. Esta galería es un excelente material didáctico para hablar sobre sustancias con adolescentes de manera objetiva."
            },
            {
                id: 6,
                author: "Pablo Fernández",
                date: "3 marzo, 2025",
                rating: 4,
                content: "Buen contenido educativo. Aprecio la objetividad con la que se presenta la información sin glorificar ni demonizar la sustancia."
            },
            {
                id: 7,
                author: "Elena Torres",
                date: "2 marzo, 2025",
                rating: 3,
                content: "Las imágenes son de buena calidad aunque creo que falta un poco más de contexto histórico sobre el uso del cannabis."
            },
            {
                id: 8,
                author: "Roberto Jiménez",
                date: "1 marzo, 2025",
                rating: 5,
                content: "Gran trabajo recopilando información científica actualizada. Se agradece este enfoque educativo en un tema que suele estar lleno de mitos y desinformación."
            },
            {
                id: 9,
                author: "Sofía Vargas",
                date: "28 febrero, 2025",
                rating: 4,
                content: "Me ha parecido muy útil toda esta información. Trabajo en prevención y este tipo de recursos son excelentes para educar sin prejuicios."
            },
            {
                id: 10,
                author: "Miguel Ángel Pérez",
                date: "26 febrero, 2025",
                rating: 2,
                content: "La información es correcta pero esperaba más datos sobre interacciones medicamentosas y contraindicaciones. Podría mejorarse esa parte."
            },
            {
                id: 11,
                author: "Carmen Romero",
                date: "24 febrero, 2025",
                rating: 5,
                content: "Increíblemente completo y objetivo. Felicito a los estudiantes que han desarrollado este proyecto educativo."
            },
            {
                id: 12,
                author: "Javier Moreno",
                date: "22 febrero, 2025",
                rating: 4,
                content: "Muy interesante la diferenciación entre THC y CBD, y sus efectos específicos. Las imágenes ayudan mucho a entender la información."
            }
        ];
        
        // Función para generar el HTML de un comentario
        function createCommentHTML(comment) {
            let starsHTML = '';
            for (let i = 1; i <= 5; i++) {
                if (i <= comment.rating) {
                    starsHTML += '<span>★</span>';
                } else {
                    starsHTML += '<span style="color: #e0e0e0;">★</span>';
                }
            }
            
            return `
                <div class="comment">
                    <div class="comment-header">
                        <span class="comment-author">${comment.author}</span>
                        <span class="comment-date">${comment.date}</span>
                    </div>
                    <div class="comment-rating">
                        ${starsHTML}
                    </div>
                    <p class="comment-content">${comment.content}</p>
                </div>
            `;
        }
        
        // Función para cargar todos los comentarios
        function loadAllComments() {
            allCommentsList.innerHTML = '';
            
            commentsDB.forEach(comment => {
                allCommentsList.innerHTML += createCommentHTML(comment);
            });
        }
        
        // Función para cargar los mejores comentarios (los 5 con mejor calificación)
        function loadTopComments() {
            // Ordenar comentarios por calificación (de mayor a menor)
            const sortedComments = [...commentsDB].sort((a, b) => b.rating - a.rating);
            const topFive = sortedComments.slice(0, 5);
            
            topCommentsList.innerHTML = '';
            
            topFive.forEach(comment => {
                topCommentsList.innerHTML += createCommentHTML(comment);
            });
        }
        
        // Función para calcular y mostrar la calificación promedio
        function updateAverageRating() {
            const totalRating = commentsDB.reduce((sum, comment) => sum + comment.rating, 0);
            const averageRating = totalRating / commentsDB.length;
            
            document.querySelector('.rating-value').textContent = averageRating.toFixed(1);
            
            // Actualizar estrellas visuales
            const stars = document.querySelectorAll('.average-rating .star');
            for (let i = 0; i < stars.length; i++) {
                if (i < Math.floor(averageRating)) {
                    stars[i].style.color = '#ffc107';
                } else {
                    stars[i].style.color = '#e0e0e0';
                }
            }
            
            // Actualizar contador de comentarios
            totalCommentsElement.textContent = `${commentsDB.length} comentarios`;
        }
        
        // Manejar el envío del formulario de comentarios
        commentForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Obtener valores del formulario
            const name = document.getElementById('commentName').value;
            const email = document.getElementById('commentEmail').value;
            const content = document.getElementById('commentText').value;
            
            // Obtener calificación seleccionada
            let rating = 0;
            const ratingInputs = document.querySelectorAll('input[name="rating"]');
            for (const input of ratingInputs) {
                if (input.checked) {
                    rating = parseInt(input.value);
                    break;
                }
            }
            
            if (rating === 0) {
                alert('Por favor, selecciona una calificación');
                return;
            }
            
            // Crear nuevo comentario
            const newComment = {
                id: commentsDB.length + 1,
                author: name,
                date: new Date().toLocaleDateString('es-ES', {day: 'numeric', month: 'long', year: 'numeric'}),
                rating: rating,
                content: content
            };
            
            // Añadir a la "base de datos" simulada
            commentsDB.unshift(newComment);
            
            // Actualizar visualización
            loadTopComments();
            loadAllComments();
            updateAverageRating();
            
            // Limpiar formulario
            commentForm.reset();
            
            // Mostrar mensaje de confirmación
            alert('¡Gracias por tu comentario!');
        });
        
        // Mostrar/ocultar todos los comentarios
        showMoreBtn.addEventListener('click', function() {
            allComments.classList.toggle('show');
            
            if (allComments.classList.contains('show')) {
                showMoreBtn.textContent = 'Mostrar menos';
            } else {
                showMoreBtn.textContent = 'Ver todos los comentarios';
            }
        });
        
        // Cargar comentarios al iniciar
        loadAllComments();
        loadTopComments();
        updateAverageRating();
        
        // Verificar imágenes al cargar
        checkImages();
    </script>
</body>
</html>
